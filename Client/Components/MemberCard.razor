@inject NavigationManager NavManager
@inject IMemberService MemberService

<div class="card mb-4">
    <div class="card-img-wrapper mb-2">
        <img class="card-img-top" src="@photoFilename" alt="Photo of @Member.KnownAs" />
        <ul class="list-inline member-icons animate text-center">
            <li class="list-inline-item">
                <button class="btn btn-primary" @onclick="HandleUserClick"><i class="fa fa-user" /></button>
                <button class="btn btn-primary"><i class="fa fa-heart" /></button>
                <button class="btn btn-primary"><i class="fa fa-envelope" /></button>
            </li>
        </ul>
    </div>
    <div class="card-body p-1">
        <h5 class="card-title text-center mb-1">
            <i class="fa fa-user mr-2" />
            @Member.KnownAs | @Member.Age
        </h5>
        <hr />
        <h6 class="card-text text-muted text-center">
            @Member.City
        </h6>
    </div>
</div>

@code {
    [Parameter]
    public MemberModel Member { get; set; }

    private string photoFilename = "./assets/user.png";

    protected override async Task OnParametersSetAsync()
    {
        photoFilename = await MemberService.GetPhotoAsync(Member.Username, Member.MainPhotoFilename);
        Member.MainPhotoFilename = photoFilename;    
    }

    private void HandleUserClick()
    {
        NavManager.NavigateTo($"/member/{Member.Username}");
    }
}
